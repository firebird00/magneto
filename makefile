# ----------------------------------------------------------------------------------------------------------------------------------
# --- Quarkwood Magneto 8.0 --------------------------------------------------------------------------------------------------------
# ----------------------------------------------------------------------------------------------------------------------------------
# --- The Makefile -----------------------------------------------------------------------------------------------------------------
# ----------------------------------------------------------------------------------------------------------------------------------


# GDB with traps for floating point exceptions
# FFLAGS = -g -ffpe-trap=invalid,overflow -fbounds-check

# GDB
# FFLAGS = -g

# GDB with profiling
# FFLAGS = -g -pg

# Optimised
  FFLAGS = -O3


# ----------------------------------------------------------------------------------------------------------------------------------


MAGNETO:	A-setup-mod.f90		\
		B-fluid-mod.f90		\
		C-tests-mod.f90		\
		D-grids-mod.f90		\
		E-recon-mod.f90		\
		F-solve-mod.f90		\
		G-evolve-mod.f90	\
		H-error-mod.f90		\
		magneto.f90

		gfortran -o MAGNETO 	\
		$(FFLAGS)		\
		A-setup-mod.f90		\
		B-fluid-mod.f90		\
		C-tests-mod.f90		\
		D-grids-mod.f90		\
		E-recon-mod.f90		\
		F-solve-mod.f90		\
		G-evolve-mod.f90	\
		H-error-mod.f90		\
		magneto.f90

		rm *.mod

clean:
		rm *.mod *~